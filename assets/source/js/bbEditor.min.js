$.fn.bbEditor=function(g){var e=this,c=null,f,k;var b=$.extend({insertToolCaller:"bb-insertTool-open"},g);var i=function(){var o='<div id="bb-insertTool" class="modal fade" role="dialog"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-body"><div class="loader"></div></div><div class="modal-footer"><button type="button" class="btn btn-warning" data-dismiss="modal">Cancel</button></div></div></div></div>';$(o).insertAfter(e);k=$(document).find("#bb-insertTool");var n=k.find(".modal-body");var m=k.find(".loader");$(document).on("click","#"+b.insertToolCaller,function(){var p=$(this);k.modal("show");m.show();$.ajax({method:"GET",url:home_path+"/bricks/builder/inserttool",success:function(q){n.empty().append(q);j(p)}}).done(function(){})})};var j=function(m){var n=m.closest(".bb-insertable");if(n.length===0){c=e;f="append"}else{c=n;f="prepend"}};$(document).on("click",".bb-insert",function(){h($(this))});var h=function(m){k.modal("hide");var n=m[0].outerHTML.replace("bb-insert","");if(f==="append"){c.append(n)}else{if(f==="prepend"){c.prepend(n)}}c.find(".bb-insertable").append(a(m));l()};var l=function(){$(".bb-insertable").sortable()};var a=function(m){var n='<i class="fa fa-plus bb-addElement" id="'+b.insertToolCaller+'"></i>';return'<div class="bb-elementMenu">'+n+'<i class="fa fa-gear"></i><i class="fa fa-trash bb-removeElement"></i></div>'};var d=function(){e.append('<div class="row"><div class="col-sm-12 text-center mt10"><div class="bb-addElement btn btn-default btn-lg" id="'+b.insertToolCaller+'"><i class="fa fa-plus"></i></div></div></div>')};i();d();return this};